<alvisnlp-plan id="rebert-train">
  <read href="BioNLP-ST-2016_BB-event/read.plan"/>
  
  <remove-test-set class="Action">
    <target>documents[@set == "test"]</target>
    <action>delete</action>
    <deleteElements/>
  </remove-test-set>

  <remove-Lives_In-Geo class="Action">
    <target>documents.sections.relations:Lives_In.tuples[args:Location.@type != "Habitat"]</target>
    <action>delete</action>
    <deleteElements/>
  </remove-Lives_In-Geo>

  <label-Lives_In class="Action">
    <target>documents.sections.relations:Lives_In.tuples</target>
    <action>set:feat:label("Relation")</action>
    <setFeatures/>
  </label-Lives_In>
  
  <seg>
    <rigid class="MergeLayers">
      <sourceLayers>Bacteria,Habitat</sourceLayers>
      <targetLayer>rigid-entities</targetLayer>
    </rigid>

    <seg href="res://segmentation.plan"/>
  </seg>

  <train class="REBERTTrain">
    <assertedCandidates>documents.sections.relations:Lives_In.tuples</assertedCandidates>
    <assertedSubject>args:Bacteria</assertedSubject>
    <assertedObject>args:Location</assertedObject>
    <assertedLabel>"Lives_In"</assertedLabel>
    <candidateGenerationScope>documents.sections.(layer:Title|layer:Paragraph)</candidateGenerationScope>
    <generatedSubjects>inside:Bacteria</generatedSubjects>
    <generatedObjects>inside:Habitat | (if @type == "Title" then section.layer:Paragraph.inside:Habitat else false)</generatedObjects>
    <generatedLabel>"None"</generatedLabel>
    <ensembleNumber>1</ensembleNumber>
    <finetunedModel>finetuned</finetunedModel>
    <labels>None,Lives_In</labels>
    <runScriptDirectory>deferred-train</runScriptDirectory>
  </train>
</alvisnlp-plan>